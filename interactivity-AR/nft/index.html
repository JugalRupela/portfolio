<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Freevio WebAR</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="../resources/css/nft-style.css" />
    
    
     <script>
        if(req.headers['user-agent'].indexOf('MicroMessenger') !== -1){
          //we are in wechat browser
            console.log("in wechat broser");
        } else{
            window.location.href = "404";
        }
      
      </script>
        
        
  </head>
  <body>
    <div id="loading">
<!--      <img alt="ar.js logo" src="../resources/data/logo.gif" />-->
      <span class="loading-text" style="color: azure">FREEVIO WEB AR</span>
      <br>
      <span class="loading-text" style="color: azure">Loading, please wait</span>
    </div>
    
    


    <!-- ==================  -->
      
    <script src="https://www.gstatic.com/firebasejs/7.15.0/firebase-app.js"></script>
   <script src="https://www.gstatic.com/firebasejs/7.15.0/firebase-database.js"></script>
   <script src="https://www.gstatic.com/firebasejs/7.15.0/firebase-storage.js"></script>
   <script src="analytics_upload.js"></script>
   
   
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script type="text/javascript" src="html2canvas.js"></script>
  
   <!--   ================== -->

<!--
    <div id="stats" class="ui stats">
      <div id="stats1" class="stats-item">
        <p class="stats-item-title">
          Main
        </p>
      </div>

      <div id="stats2" class="stats-item">
        <p class="stats-item-title">
          Worker
        </p>
      </div>
    </div>
-->

    <!--
      ==================
      CAMERA VIDEO & CANVAS
      ==================
    -->

    <div id="app">
      <video loop autoplay muted playsinline id="video"></video>

      <canvas id="canvas"></canvas>
      
<!--      <button onclick="snapped" class="ui snapBtn" >Snap</button>-->

    </div>


   
    <script src="../resources/js/libs/stats.min.js"></script>
    <script src="../resources/three.js"></script>
    <script src="../resources/js/GLTFLoader.js"></script>
    <script src="threejs_worker_Duck_gltf.js"></script>
    <script src="nftLoader_light.js"></script>

    <script>
      var container = document.getElementById("app");
      var video = document.getElementById("video");
      var canvas = document.getElementById("canvas");

      nftLoader(container, video, 480, 640, canvas, "pinball", true);

    </script>
    
    

     <div id="app">
           <button onclick="snapped()" class="ui snapBtn" id="snap-img">Snap</button>
     </div>
     
    <script type="text/javascript">
        function snapped(){
            html2canvas($('#canvas'), {
                onrendered: function(canvas) {
                    
                  console.log("snapped");
                  upload_clicked();  
                    
                    var img = canvas.toDataURL()
                    window.open(img);
                }
              });   
        }
        
        
       

    </script>
      

    
  </body>
</html>
